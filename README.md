# Online Media Player
#### Video Demo:  <https://youtu.be/x2gloN6ic3g>
#### Description:

This project can be divided into two parts:

First part is making a basic website with a registration system. Making the site involved a lot of tinkering with CSS, learning to work with bootstrap, and making sure everything is aligned properly and in the correct place. I chose to make the design very minimal so I can focus more on the backend. 
As for the registration system, the input data is checked against certain criteria (length, character diversity, etc..) and against the DB to prevent duplicate usernames. The password in hashed and the data is saved in the "users" DB table. The login part is also straight forward, a simple check against the DB.
In addition to that there is a password reset system, the user enters their email and username. If they match, a password is generated using werkzeug.security and sent to the user's email through flask-mail. When the user enters the password they recieved via email, it gets checked against the one generated earlier. 
I couldn't test the part that sends an email since i used flask in development mode, but it is only a few lines that are taken almost directly from the flask-mail API (in general, many hours of the project had me reading all the API's of flask, werkzeug, jinja, etc.. in order to thoroughly understand how everything works). 

The second part is the media player library itself. It is divided into three parts: the upload page, the library, and the player. 
First i made an upload form that only accepts mp3 and wav files, then i wanted to extract the metadata from the files and tried to do it manually by reading each file. It turned out to be much more complicated then i anticipated so i turned to the python library "eye3d". The metadata of each file is saved in the DB table "songs" together with the user id from the "users" table for personal identification, and the file itself is saved in the static folder of the flask app (unless there is already a file with the same metadata, then it is skiped).
The library page is simply a display of the "songs" table, first the one tagged with the active user id, then in a seperate list are all the rest of the songs in the DB. There are two functions for each song: "add to playlist" and "delete", both are straight forward, the first adds the song to the playlist and the second deletes both the file from and the record in the database. 
There is currently only one playlist available per session (as in flask-session), it is not visible from the library page and you can only add one song at a time to the end of the playlist. These features are planned to be changed in the future to make it more usable and user-friendly.
The player page is the last one, there's a custum function to transfer the playlist from Python to JSON (the jsonify library didn't work with flask for some reason) and a function to remove a song from the playlist. The rest is written in JavaScript, the media player is actually a "front" for a simple audio HTML tag, and the operations (next, previous, stop, pause, play) are functions that link the playlist JSON object and the relevant file data with the 'src' attribute of the audio tag. 
finally, In order to have a live and dynamic display of the timer and progress bar while still being able to click next/stop/etc.. i used an a-synchronous JavaScript function for the "play()" function. In addition, there is an event listener to any mouse-clicks on the progress bar, it changes the current time of the active song according to the distance between the click spot and the left side of the bar. Effectively creating a dynamic progress bar.